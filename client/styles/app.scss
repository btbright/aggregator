/*! HTML5 Boilerplate v5.2.0 | MIT License | https://html5boilerplate.com/ */

/*
 * What follows is the result of much research on cross-browser styling.
 * Credit left inline and big thanks to Nicolas Gallagher, Jonathan Neal,
 * Kroc Camen, and the H5BP dev community and team.
 */

/* ==========================================================================
   Base styles: opinionated defaults
   ========================================================================== */

html {
    color: #222;
    font-size: 1em;
    line-height: 1.4;
}

/*
 * Remove text-shadow in selection highlight:
 * https://twitter.com/miketaylr/status/12228805301
 *
 * These selection rule sets have to be separate.
 * Customize the background color to match your design.
 */

::-moz-selection {
    background: #b3d4fc;
    text-shadow: none;
}

::selection {
    background: #b3d4fc;
    text-shadow: none;
}

/*
 * A better looking default horizontal rule
 */

hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0;
}

/*
 * Remove the gap between audio, canvas, iframes,
 * images, videos and the bottom of their containers:
 * https://github.com/h5bp/html5-boilerplate/issues/440
 */

audio,
canvas,
iframe,
img,
svg,
video {
    vertical-align: middle;
}

/*
 * Remove default fieldset styles.
 */

fieldset {
    border: 0;
    margin: 0;
    padding: 0;
}

/*
 * Allow only vertical resizing of textareas.
 */

textarea {
    resize: vertical;
}

/* ==========================================================================
   Browser Upgrade Prompt
   ========================================================================== */

.browserupgrade {
    margin: 0.2em 0;
    background: #ccc;
    color: #000;
    padding: 0.2em 0;
}

/* ==========================================================================
   Aggregator styles
   ========================================================================== */

$levelBlue: #3FCEF3;
$levelGreen: #33C333;
$levelGold: #FFB600;
$levelDefault: #BBBBBB;

$levelBackgroundBlue: rgba(63,206,243,.1);
$levelBackgroundGreen: rgba(51,195,51,.1);
$levelBackgroundGold: rgba(255,182,0,.1);
$levelBackgroundDefault: rgba(0,0,0,.05);

html, body, #react-root, .outer-wrap
{
    height: 100%;
}

body {
    background:#fbfbfb;
    color:rgba(0,0,0,.5);
    font: 16px "Helvetica Neue",Helvetica,Arial,sans-serif;
}

.app-wrap {
    max-width:1000px;
    margin:20px auto;
    position: relative;
    height:100%;
    display: flex;
    flex-direction: column;
}

.leaderboard {
    margin-top:20px;
    float:right;
    td {
        padding:3px;
        &.points {
            text-align:right;
            padding-right:10px;
        }
        &.isUser {
            font-weight:bold;
        }
    }
}

.channel-name,
.room-name {
    font-size: 45px;
    font-family: "Poppins";
    animation-name: coolFadeIn;
    animation-duration: .7s;
    line-height: 40px;
}

.room-info {
    margin-top:20px;
    position:relative;
    .right-info {
        position: absolute;
        right: 0;
        top: 50%;
        margin-top: -14px;
    }
    .left-info {
        .user-count {
            text-align: left;
            display:inline;
            margin-right: 15px;
        }
    }
    .user-count,
    .user-name {
        font-size:12px;
        display: block;
        text-align: right;
        animation-name: coolFadeIn;
        animation-duration: .3s;
    }
    .user-name {
        transition:color .15s;
    }
}

.upper-notification-bar {
    width:100%;
    height:40px;
    position:relative;
    margin-top:25px;
    .notification {
        position: absolute;
        top: 50%;
        margin-top: -9px;
        left: 12px;
        animation-name: coolFadeIn;
        animation-duration: .3s;
        &.notification-fade {
            transition: opacity .3s;
            opacity: 0;
        }
        &.notification-warning {
            color:#FF6868;
        }
        &.notification-error {
            color:#FF6868;
        }
    }
}

@keyframes coolFadeIn {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

.primary-content-wrap {
    position: relative;
    margin-top: 25px;
    .aggregator-list,
    .chat {
        width:48%;
        margin:0px 0px 0;
        padding-bottom: 38px;
    }
}

.chat {
    background: #f3f3f3;
    position:relative;
    min-height: 300px;
    margin-right:20px;
    float:left;
    .chat-message-list {
        max-height:500px;
        overflow-y: auto;
    }
    .comment {
        width:100%;
        position: relative;
        padding:5px 70px 5px 10px;
        box-sizing:border-box;
        cursor: pointer;
        transition:border .2s, background .07s;
        border-right:2px solid transparent;
        &.comment-aggregation-level-gold {
            border-right:2px solid $levelGold;
        }
        &.comment-aggregation-level-blue {
            border-right:2px solid $levelBlue;
        }
        &.comment-aggregation-level-green {
            border-right:2px solid $levelGreen;
        }
        &.comment-aggregation-level-default {
            border-right:2px solid $levelDefault;
        }
        &.comment-aggregation-complete {
            cursor: default;
            &.comment-aggregation-level-gold {
                background-color:$levelBackgroundGold;
                &:hover {
                    background-color:$levelBackgroundGold;
                }
            }
            &.comment-aggregation-level-blue {
                background-color:$levelBackgroundBlue;
                &:hover {
                    background-color:$levelBackgroundBlue;
                }
            }
            &.comment-aggregation-level-green {
                background-color:$levelBackgroundGreen;
                &:hover {
                    background-color:$levelBackgroundGreen;
                }
            }
            &.comment-aggregation-level-default {
                background-color:$levelBackgroundDefault;
                &:hover {
                    background-color:$levelBackgroundDefault;
                }
            }
        }
        &:hover {
            background: #ededed;
        }
        &.comment-is-self-authored {
            cursor: default;
            &:hover {
                background: inherit;
            }
        }
        &:first-child {
            margin-top:0;
        }
        .comment-time {
            position: absolute;
            right: 8px;
            top: 8px;
            font-size: .7em;
            color: #ccc;
        }
        .comment-text,.comment-meta {
            float:left;
        }
        .comment-text {
            margin:0;
        }
        .comment-meta {
            margin-right:5px;
            line-height: 18px;
            .author {
                font-weight: bold;
                position: relative;
            }
        }
        .aggregation-summary {
            display:none;
        }
        &.comment-aggregated .aggregation-summary {
            display:block;
            height: 100%;
            background: rgba(51, 195, 51,0.1);
            position: absolute;
            right: -2px;
            top: 0px;
            padding: 5px;
            padding-right: 8px;
            z-index: -2;
            border-right: 2px solid #33C333;
            box-sizing: border-box;
            font-size: 12px;
            transition:right .2s;
            p {margin: 0;margin-top: 3px;}
            .count,.count-label {
                text-align: center;
            }
            .count-label {
                transform: rotate(-90deg);
                display: block;
                float: right;
                font-size: 17px;
                position: relative;
                bottom: 4px;
                margin-left: 2px;
            }
        }
        &.has-clicked .aggregation-summary {
            margin-right:-2px;
        }
    }
    .comment-form {
        position:absolute;
        bottom:0px;
        width:100%;
        height:38px;
        overflow: hidden;
        .hidden-comment-mirror {display:none;}
        .comment-box {
            width:100%;
            height:100%;
            box-sizing: border-box;
            outline:none;
            border:none;
            background: #e9e9e9;
            padding: 10px;

            &:-moz-placeholder {
               color:#ccc;
               font-weight: 300;
            }
            &::-moz-placeholder {
               color:#ccc;
               font-weight: 300;
            }
            &:-ms-input-placeholder {  
               color:#ccc;
               font-weight: 300;
            }
            &::-webkit-input-placeholder {
               color:#ccc;
               font-weight: 300;
            }
        }
        .submit-instructions {
          position:absolute;
          right:10px;
          top:200%;
          margin-top:-.5em;
          font-size: 13px;
          color:rgba(0,0,0,.2);
          opacity: 0;
        }
        &.has-entered-text .submit-instructions {
          animation-name:showSubmitInstructions;
          animation-duration:.4s;
          opacity: 1;
          top:50%;
        }
        &.space-conflict .submit-instructions {
          animation-name:hideSubmitInstructions;
          animation-duration:.4s;
          opacity: 0;
          top:200%;
        }
    }
    &.chat-user-clicking {
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
        .comment-time,
        .comment-text {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            .comment-meta {
                -moz-user-select: none;
                -webkit-user-select: none;
                -ms-user-select: none;
                .author {
                    -moz-user-select: none;
                    -webkit-user-select: none;
                    -ms-user-select: none;
                }
            }
        }
    }
}

@keyframes showSubmitInstructions {
    0% {
        opacity: 0;
        top:200%;
    }
    1% {
        opacity: 0;
        top:50%;
    }
    100% {
        opacity: 1;
        top:50%;
    }
}

@keyframes hideSubmitInstructions {
    0% {
        top:50%;
        opacity: 1;
    }
    99% {
        top:50%;
        opacity: 0;
    }
    100% {
        top:200%;
        opacity: 0;
    }
}

.aggregator-list {
    min-height:500px;
    float:right;
}
.aggregator {
    clear:both;
    margin:0px 0px 30px;
    position: relative;
    background:rgba(0,0,0,.04);
    cursor: pointer;
    transition: background .2s, opacity .4s;
    box-sizing: border-box;

    &:hover {
        background:rgba(0,0,0,.03);
    }

    &::before {
        transition: background .4s;
        background: transparent;
        content:'';
        display:block;
        position:absolute;
        width:2px;
        height: 100%;
        left:0;
        top:0;
        z-index: 9;
    }

    .pressing-dot {
        height:6px;
        width:6px;
        display:block;
        background:#BBB;
        border-radius: 50%;
        position:absolute;
        top:50%;
        left:-13px;
        margin-top:-3px;
        opacity: 0;
        transition: opacity .15s;
    }

    &.aggregator-pressing {
        .pressing-dot {
            opacity: 1;
        }
    }

    &.aggregator-completed,
    &.aggregator-retired {
        .pressing-dot {
            opacity: 0;
        }
    }

    &.aggregator-initializing {
        .right-text,
        .left-text
        {
            opacity: 0 !important;
        }
        .instructions-text {
            opacity: 1 !important;
        }
        .bar-residue {
            background:$levelDefault !important;
            -webkit-animation: countdown 2s linear;
            transform-origin:left;
            opacity: 0;
        }
    }

    @-webkit-keyframes countdown {
        0%{transform: scaleX(1);opacity:.2;width:100%;}
        99%{transform: scaleX(0);opacity:.2;width:100%;}
        100%{transform: scaleX(0);opacity:0;width:0%;}
    }

    @-webkit-keyframes pulse {
        0%{background-position:50% 0%}
        50%{background-position:50% 100%}
        100%{background-position:50% 0%}
    }

    &.aggregator-level-gold {
        background: $levelBackgroundGold;
        &::before {
            background: $levelGold;
        }
    }

    &.aggregator-level-blue {
        background: $levelBackgroundBlue;
        &::before {
            background: $levelBlue;
        }
    }

    &.aggregator-level-green {
        background: $levelBackgroundGreen;
        &::before {
            background: $levelGreen;
        }
    }

    &.aggregator-level-default {
        background: $levelBackgroundDefault;
        &::before {
            background: $levelDefault;
        }
    }

    &.aggregator-retired,
    &.aggregator-completed {
        cursor: default;
        .bar-inner {
            opacity: 0 !important;
        }
        .right-text,
        .left-text {
            opacity: 1 !important;
        }
        .bar-residue {
            opacity: 0 !important;
        }
    }

    &.aggregator-removed,
    &.aggregator-retired {
        opacity: 0;
    }

    .bar {
        -webkit-user-select:none;
        width:100%;
        opacity: 0.7;
        transition:opacity .4s;

        .bar-wrap {
            -webkit-user-select:none;
            width:100%;
            height:14px;
            background: rgba(0,0,0,.05);
            position:relative;
            z-index: -3;

            .bar-inner {
                -webkit-user-select:none;
                background:$levelDefault;
                height:100%;
                position: relative;
                cursor: pointer;
                position: relative;
                z-index: 1;
                transition: background-color .2s, width .1s;

                &::before {
                    opacity: 0;
                    content:"";
                    background: rgba(255,255,255,.25);
                    position: absolute;
                    display: block;
                    top:0;
                    left:0;
                    height:100%;
                    width:100%;
                    transition:opacity .15s;
                }

                &:hover::before {
                    opacity: .5;
                }

                &:active::before {
                    opacity: 1;
                }

                &::after {
                    content:"";
                    background: rgba(255,255,255,.3);
                    position: absolute;
                    display: block;
                    top:0;
                    left:0; 
                    height:50%;
                    width:100%;
                }
            }

            .bar-residue {
                height:100%;
                position: absolute;
                z-index: -2;
                background: #fff;
                top:0px;
                left:0px;
                transition: background-color .2s, width .1s;

                &.bar-residue-green {
                    background: $levelGreen;
                    opacity: 0.2;
                }
                &.bar-residue-blue {
                    background: $levelBlue;
                    opacity: 0.2;
                }
                &.bar-residue-default {
                    background: $levelDefault;
                    opacity: 0.2;
                }
                &.bar-residue-gold {
                    background: $levelGold;
                    opacity: 0.2;
                }
            }

            .bar-leader {
                position:absolute;
                top:0px;
                right:0px;
                height:100%;
                background: rgba(255,255,255,.25);
                opacity: 1;
                animation-name: boom;
                animation-duration: 0.4s;
                animation-iteration-count:infinite;
            }

            @keyframes boom {
                0% {
                    opacity: 1;
                }
                50% {
                    right:0%;
                    opacity: 1;
                }
                100% {
                    opacity: 0;
                    right:0%;
                }
            }

            .right-text,
            .left-text,
            .instructions-text {
                position: absolute;
                top: 0px;
                right: 3px;
                font-size: 11px;
                font-weight: 500;
                color: rgba(0,0,0,.2);
                transition:opacity .2s;
                z-index: 0;
                opacity: 1;
            }

            .instructions-text {
                right:50%;
                margin-right:-75px;
                opacity: 0;
            }

            .left-text {
                left:5px;
                right:auto;
                opacity: 0;
            }

            &.bar-almost-full .right-text {
                opacity: 0;
            }

            &.bar-blue .bar-inner {
                background: $levelBlue;
            }
            &.bar-green .bar-inner {
                background: $levelGreen;
            }
            &.bar-gold .bar-inner {
                background: $levelGold;
            }
            &.bar-default .bar-inner {
                background: $levelDefault;
            }
        }
    }

    .text-display {
        padding:10px 0 11px;

        p {
            text-align: center;
            color: #777;
            font: 16px "Helvetica Neue",Helvetica,Arial,sans-serif;
            font-weight: 300;
            padding: 0 10px;
            letter-spacing: 0.3px;
            margin: 0;
        }
    }

    &.aggregator-user-clicking {
        .text-display {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            p {
                -moz-user-select: none;
                -webkit-user-select: none;
                -ms-user-select: none;
            }
        }
    }
}

.instructions-link {
    float: right;
    margin-top: 39px;
    font-size: 11px;
    cursor: pointer;
}

.instructions-modal {
    background:rgba(255,255,255,0.95);
    height:100%;
    width:100%;
    position:fixed;
    display:none;
    top:0;
    left:0;
    z-index: 9999;

    .modal-content {
        max-width:960px;
        margin:50px auto;
        padding:100px;

        h1 {
            margin-top:-36px;
        }

        a {
            color: rgba(0,0,0,.5);
            text-decoration: none;
        }

        .modal-close-button {
            cursor: pointer;
            text-align: right;
            font-size: 25px;
        }
    }

    &.instructions-modal-open {
        display:block;
    }
}

.app-twitch-embeded {
    margin:0px auto;

    .header {
        padding: 0 12px;
    }
    .channel-name {
        line-height: inherit;
        float:left;
    }
    .upper-notification-bar {
        margin:0;
        padding: 0 12px;
    }
    .primary-content-wrap {
        margin-top:10px;
        display: flex;
        flex-direction: row;
        flex: 1;
        padding: 0 12px 12px;
    }
    .room-info {
        float:left;
        margin-top:0;
    }
    .leaderboard {
        margin-top:10px;
        float:none;
        tr {
            float:left;
            display:inline;
            td {
                padding-left:0;
            }
        }
    }
    .twitch-embed {
        clear:both;
    }
    .twitch-meta {
        display:inline;
    }
    .meta-wrap {
        float:left;
        margin-top: 18px;
    }
    .meta-info {
        margin-left: 10px;
    }
    .chat {
        flex:1;
        order:1;
        margin-right:15px;
        min-height:inherit;
    }
    .chat-message-list {
        max-height:inherit;
    }
    .aggregator-list {
        flex:1;
        order:2;
        padding-bottom: 0;
        min-height: inherit;
        margin-left:15px;
        overflow-y: auto;
    }
}

/* ==========================================================================
   Helper classes
   ========================================================================== */

/*
 * Hide visually and from screen readers:
 */

.hidden {
    display: none !important;
}

/*
 * Hide only visually, but have it available for screen readers:
 * http://snook.ca/archives/html_and_css/hiding-content-for-accessibility
 */

.visuallyhidden {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

/*
 * Extends the .visuallyhidden class to allow the element
 * to be focusable when navigated to via the keyboard:
 * https://www.drupal.org/node/897638
 */

.visuallyhidden.focusable:active,
.visuallyhidden.focusable:focus {
    clip: auto;
    height: auto;
    margin: 0;
    overflow: visible;
    position: static;
    width: auto;
}

/*
 * Hide visually and from screen readers, but maintain layout
 */

.invisible {
    visibility: hidden;
}

/*
 * Clearfix: contain floats
 *
 * For modern browsers
 * 1. The space content is one way to avoid an Opera bug when the
 *    `contenteditable` attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that receive the `clearfix` class.
 * 2. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */

.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 1.25dppx),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid the additional HTTP request:
   http://www.phpied.com/delay-loading-your-print-css/
   ========================================================================== */

@media print {
    *,
    *:before,
    *:after {
        background: transparent !important;
        color: #000 !important; /* Black prints faster:
                                   http://www.sanbeiji.com/archives/953 */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links that are fragment identifiers,
     * or use the `javascript:` pseudo protocol
     */

    a[href^="#"]:after,
    a[href^="javascript:"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    /*
     * Printing Tables:
     * http://css-discuss.incutio.com/wiki/Printing_Tables
     */

    thead {
        display: table-header-group;
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}
